# üìø T·ª® TR·ª§ - B√ÅT T·ª∞

## 1. T·ªïng quan T·ª© Tr·ª•

### 1.1 T·ª© Tr·ª• l√† g√¨?

**T·ª© Tr·ª•** (ÂõõÊü±) l√† ph∆∞∆°ng ph√°p xem m·ªánh d·ª±a tr√™n 4 c·ªôt th·ªùi gian (nƒÉm, th√°ng, ng√†y, gi·ªù) - c√≤n g·ªçi l√† **B√°t T·ª±** (ÂÖ´Â≠ó) v√¨ m·ªói c·ªôt g·ªìm 2 ch·ªØ (Can + Chi).

### ƒê·∫∑c ƒëi·ªÉm:
- **Ngu·ªìn g·ªëc:** Trung Qu·ªëc, c√≥ t·ª´ th·ªùi nh√† ƒê∆∞·ªùng (618-907)
- **N·ªÅn t·∫£ng:** L√Ω thuy·∫øt Ng≈© H√†nh, √Çm D∆∞∆°ng
- **Ph·ªï bi·∫øn:** Trung Qu·ªëc, Vi·ªát Nam, ƒê√†i Loan
- **Kh√°c v·ªõi T·ª≠ Vi:** T·ª© Tr·ª• d√πng 8 ch·ªØ, T·ª≠ Vi d√πng 12 cung

### 1.2 C·∫•u tr√∫c B√°t T·ª±

```
NƒÉm:    Can Chi    (2 ch·ªØ)
Th√°ng:  Can Chi    (2 ch·ªØ)
Ng√†y:   Can Chi    (2 ch·ªØ)
Gi·ªù:    Can Chi    (2 ch·ªØ)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
T·ªïng:   8 ch·ªØ (B√°t T·ª±)
```

**V√≠ d·ª•:** Sinh 15/02/1990, gi·ªù T√Ω (23:00-01:00)
```
NƒÉm:    Canh Ng·ªç
Th√°ng:  B√≠nh D·∫ßn
Ng√†y:   ·∫§t M√£o
Gi·ªù:    Canh T√Ω
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
B√°t T·ª±: Canh Ng·ªç - B√≠nh D·∫ßn - ·∫§t M√£o - Canh T√Ω
```

---

## 2. Thi√™n Can (Â§©Âπ≤)

### 2.1 10 Thi√™n Can

| STT | Can | H√†nh | Yin/Yang | Th·ª© t·ª± |
|-----|-----|------|----------|--------|
| 1 | Gi√°p (Áî≤) | M·ªôc | D∆∞∆°ng | 1 |
| 2 | ·∫§t (‰πô) | M·ªôc | √Çm | 2 |
| 3 | B√≠nh (‰∏ô) | H·ªèa | D∆∞∆°ng | 3 |
| 4 | ƒêinh (‰∏Å) | H·ªèa | √Çm | 4 |
| 5 | M·∫≠u (Êàä) | Th·ªï | D∆∞∆°ng | 5 |
| 6 | K·ª∑ (Â∑±) | Th·ªï | √Çm | 6 |
| 7 | Canh (Â∫ö) | Kim | D∆∞∆°ng | 7 |
| 8 | T√¢n (Ëæõ) | Kim | √Çm | 8 |
| 9 | Nh√¢m (Â£¨) | Th·ªßy | D∆∞∆°ng | 9 |
| 10 | Qu√Ω (Áô∏) | Th·ªßy | √Çm | 10 |

### 2.2 Quan h·ªá Thi√™n Can

**T∆∞∆°ng Sinh (Áõ∏Áîü):**
```
Gi√°p ‚Üí ·∫§t ‚Üí B√≠nh ‚Üí ƒêinh ‚Üí M·∫≠u ‚Üí K·ª∑ ‚Üí Canh ‚Üí T√¢n ‚Üí Nh√¢m ‚Üí Qu√Ω ‚Üí Gi√°p
(G·ªó)  (G·ªó)  (L·ª≠a)  (L·ª≠a)  (ƒê·∫•t) (ƒê·∫•t)  (Kim)  (Kim)  (N∆∞·ªõc) (N∆∞·ªõc)
```

**T∆∞∆°ng Kh·∫Øc (Áõ∏ÂÖã):**
```
Gi√°p ‚Üí Canh ‚Üí M·∫≠u ‚Üí Nh√¢m ‚Üí B√≠nh ‚Üí T√¢n ‚Üí ·∫§t ‚Üí Qu√Ω ‚Üí ƒêinh ‚Üí K·ª∑ ‚Üí Gi√°p
(G·ªó)  (Kim)  (ƒê·∫•t) (N∆∞·ªõc) (L·ª≠a) (Kim)  (G·ªó)  (N∆∞·ªõc) (L·ª≠a)  (ƒê·∫•t)
```

### 2.3 Ph√¢n chia Thi√™n Can

**Theo Ng≈© H√†nh:**
- **M·ªôc:** Gi√°p, ·∫§t
- **H·ªèa:** B√≠nh, ƒêinh
- **Th·ªï:** M·∫≠u, K·ª∑
- **Kim:** Canh, T√¢n
- **Th·ªßy:** Nh√¢m, Qu√Ω

**Theo √Çm D∆∞∆°ng:**
- **D∆∞∆°ng:** Gi√°p, B√≠nh, M·∫≠u, Canh, Nh√¢m
- **√Çm:** ·∫§t, ƒêinh, K·ª∑, T√¢n, Qu√Ω

---

## 3. ƒê·ªãa Chi (Âú∞ÊîØ)

### 3.1 12 ƒê·ªãa Chi

| STT | Chi | Con v·∫≠t | H√†nh | Yin/Yang |
|-----|-----|---------|------|----------|
| 1 | T√Ω (Â≠ê) | Chu·ªôt | Th·ªßy | D∆∞∆°ng |
| 2 | S·ª≠u (‰∏ë) | Tr√¢u | Th·ªï | √Çm |
| 3 | D·∫ßn (ÂØÖ) | H·ªï | M·ªôc | D∆∞∆°ng |
| 4 | M√£o (ÂçØ) | M√®o/Th·ªè | M·ªôc | √Çm |
| 5 | Th√¨n (Ëæ∞) | R·ªìng | Th·ªï | D∆∞∆°ng |
| 6 | T·ªµ (Â∑≥) | R·∫Øn | H·ªèa | √Çm |
| 7 | Ng·ªç (Âçà) | Ng·ª±a | H·ªèa | D∆∞∆°ng |
| 8 | M√πi (Êú™) | D√™ | Th·ªï | √Çm |
| 9 | Th√¢n (Áî≥) | Kh·ªâ | Kim | D∆∞∆°ng |
| 10 | D·∫≠u (ÈÖâ) | G√† | Kim | √Çm |
| 11 | Tu·∫•t (Êàå) | Ch√≥ | Th·ªï | D∆∞∆°ng |
| 12 | H·ª£i (‰∫•) | L·ª£n | Th·ªßy | √Çm |

### 3.2 Quan h·ªá ƒê·ªãa Chi

**T∆∞∆°ng H·ª£p (ÂÖ≠Âêà):**
```
T√Ω ‚Üî T·ªµ    (Th·ªßy + H·ªèa = H√≥a H·ªèa)
S·ª≠u ‚Üî Th√¨n  (Th·ªï + Th·ªï = H√≥a Th·ªï)
D·∫ßn ‚Üî H·ª£i   (M·ªôc + Th·ªßy = H√≥a Th·ªßy)
M√£o ‚Üî Ng·ªç   (M·ªôc + H·ªèa = H√≥a H·ªèa)
Th√¢n ‚Üî D·∫≠u  (Kim + Kim = H√≥a Kim)
Tu·∫•t ‚Üî H·ª£i  (Th·ªï + Th·ªßy = H√≥a Th·ªßy)
```

**Tam H·ª£p (‰∏âÂêà):**
```
Kim: Th√¨n ‚Üî Tu·∫•t ‚Üî S·ª≠u
Th·ªßy: T√Ω ‚Üî Ng·ªç ‚Üî M√πi
H·ªèa: D·∫ßn ‚Üî Ng·ªç ‚Üî Tu·∫•t
Th·ªï: S·ª≠u ‚Üî Th√¨n ‚Üî M√πi
```

**L·ª•c Xung (ÂÖ≠ÂÜ≤):**
```
T√Ω ‚Üî Ng·ªç   (Th·ªßy + H·ªèa)
S·ª≠u ‚Üî M√πi  (Th·ªï + Th·ªï)
D·∫ßn ‚Üî Th√¢n (M·ªôc + Kim)
M√£o ‚Üî D·∫≠u  (M·ªôc + Kim)
Th√¨n ‚Üî Tu·∫•t (Th·ªï + Th·ªï)
T·ªµ ‚Üî H·ª£i   (H·ªèa + Th·ªßy)
```

### 3.3 Quan h·ªá ƒê·ªãa Chi - Thi√™n Can

| Chi | Can h·ª£p | Can kh·∫Øc |
|-----|---------|----------|
| T√Ω | Gi√°p, B√≠nh, M·∫≠u, Canh | ·∫§t, ƒêinh, K·ª∑, T√¢n, Nh√¢m, Qu√Ω |
| S·ª≠u | ·∫§t, ƒêinh, K·ª∑, T√¢n | Gi√°p, B√≠nh, M·∫≠u, Canh, Nh√¢m, Qu√Ω |
| D·∫ßn | Gi√°p, B√≠nh, M·∫≠u, Canh | ·∫§t, ƒêinh, K·ª∑, T√¢n, Nh√¢m, Qu√Ω |
| ... | ... | ... |

---

## 4. Ng≈© H√†nh trong T·ª© Tr·ª•

### 4.1 Ng≈© H√†nh v√† Thi√™n Can

| H√†nh | Thi√™n Can | T√≠nh ch·∫•t |
|------|-----------|-----------|
| **M·ªôc** | Gi√°p, ·∫§t | Ph√°t tri·ªÉn, s√°ng t·∫°o |
| **H·ªèa** | B√≠nh, ƒêinh | NƒÉng ƒë·ªông, nhi·ªát t√¨nh |
| **Th·ªï** | M·∫≠u, K·ª∑ | ·ªîn ƒë·ªãnh, nu√¥i d∆∞·ª°ng |
| **Kim** | Canh, T√¢n | C·ª©ng r·∫Øn, quy·∫øt ƒëo√°n |
| **Th·ªßy** | Nh√¢m, Qu√Ω | Linh ho·∫°t, th√¥ng minh |

### 4.2 Ng≈© H√†nh v√† ƒê·ªãa Chi

| H√†nh | ƒê·ªãa Chi | ƒê·∫∑c ƒëi·ªÉm |
|------|---------|----------|
| **M·ªôc** | D·∫ßn, M√£o | NƒÉng l∆∞·ª£ng ph√°t tri·ªÉn |
| **H·ªèa** | T·ªµ, Ng·ªç | NƒÉng l∆∞·ª£ng n√≥ng |
| **Th·ªï** | S·ª≠u, Th√¨n, M√πi, Tu·∫•t | NƒÉng l∆∞·ª£ng nu√¥i d∆∞·ª°ng |
| **Kim** | Th√¢n, D·∫≠u | NƒÉng l∆∞·ª£ng c·ª©ng r·∫Øn |
| **Th·ªßy** | T√Ω, H·ª£i | NƒÉng l∆∞·ª£ng l∆∞u ƒë·ªông |

### 4.3 T∆∞∆°ng Sinh - T∆∞∆°ng Kh·∫Øc

**T∆∞∆°ng Sinh:**
```
Th·ªßy ‚Üí M·ªôc ‚Üí H·ªèa ‚Üí Th·ªï ‚Üí Kim ‚Üí Th·ªßy
(N∆∞·ªõc) (G·ªó)  (L·ª≠a) (ƒê·∫•t) (Kim) (N∆∞·ªõc)
```

**T∆∞∆°ng Kh·∫Øc:**
```
Th·ªßy ‚Üí Th·ªï ‚Üí H·ªèa ‚Üí Kim ‚Üí M·ªôc ‚Üí Th·ªßy
(N∆∞·ªõc) (ƒê·∫•t) (L·ª≠a) (Kim) (G·ªó) (N∆∞·ªõc)
```

---

## 5. C√°ch L·∫≠p T·ª© Tr·ª•

### 5.1 B∆∞·ªõc 1: X√°c ƒë·ªãnh NƒÉm

**C√¥ng th·ª©c:** Can = (NƒÉm - 4) % 10, Chi = (NƒÉm - 4) % 12

```python
CAN = ['Gi√°p', '·∫§t', 'B√≠nh', 'ƒêinh', 'M·∫≠u', 'K·ª∑', 'Canh', 'T√¢n', 'Nh√¢m', 'Qu√Ω']
CHI = ['T√Ω', 'S·ª≠u', 'D·∫ßn', 'M√£o', 'Th√¨n', 'T·ªµ', 'Ng·ªç', 'M√πi', 'Th√¢n', 'D·∫≠u', 'Tu·∫•t', 'H·ª£i']

def get_nam_am_lich(nam_duong):
    can = CAN[(nam_duong - 4) % 10]
    chi = CHI[(nam_duong - 4) % 12]
    return f"{can} {chi}"
```

**V√≠ d·ª•:** 2024 = Gi√°p Th√¨n

### 5.2 B∆∞·ªõc 2: X√°c ƒë·ªãnh Th√°ng

**C√¥ng th·ª©c:** D·ª±a v√†o th√°ng d∆∞∆°ng, t√¨m chi th√°ng, r·ªìi t√≠nh can th√°ng.

**Chi th√°ng:**
| Th√°ng | Chi |
|-------|-----|
| 1 | D·∫ßn |
| 2 | M√£o |
| 3 | Th√¨n |
| 4 | T·ªµ |
| 5 | Ng·ªç |
| 6 | M√πi |
| 7 | Th√¢n |
| 8 | D·∫≠u |
| 9 | Tu·∫•t |
| 10 | H·ª£i |
| 11 | T√Ω |
| 12 | S·ª≠u |

**Can th√°ng:** (NƒÉm Can √ó 2 + Th√°ng - 1) % 10

```python
def get_thang_am_lich(nam_can, thang):
    """L·∫•y can chi th√°ng"""
    chi_thang = ['D·∫ßn', 'M√£o', 'Th√¨n', 'T·ªµ', 'Ng·ªç', 'M√πi', 
                 'Th√¢n', 'D·∫≠u', 'Tu·∫•t', 'H·ª£i', 'T√Ω', 'S·ª≠u'][thang - 1]
    
    can_thang = CAN[(CAN.index(nam_can) * 2 + thang - 1) % 10]
    return f"{can_thang} {chi_thang}"
```

### 5.3 B∆∞·ªõc 3: X√°c ƒë·ªãnh Ng√†y

**C√¥ng th·ª©c:** Ph·ª©c t·∫°p, c·∫ßn tra b·∫£ng ho·∫∑c d√πng th∆∞ vi·ªán.

```python
from lunardate import LunarDate

def get_ngay_am_lich(nam, thang, ngay):
    """L·∫•y can chi ng√†y √¢m l·ªãch"""
    ld = LunarDate.fromSolarDate(nam, thang, ngay)
    # Can ng√†y = (ng√†y √¢m √ó 2 - 1) % 10
    can_ngay = CAN[(ld.day * 2 - 1) % 10]
    chi_ngay = CHI[(ld.day - 1) % 12]
    return f"{can_ngay} {chi_ngay}"
```

### 5.4 B∆∞·ªõc 4: X√°c ƒë·ªãnh Gi·ªù

**Chi gi·ªù:**
| Gi·ªù | Chi | Th·ªùi gian |
|-----|-----|-----------|
| 1 | T√Ω | 23:00-01:00 |
| 2 | S·ª≠u | 01:00-03:00 |
| 3 | D·∫ßn | 03:00-05:00 |
| 4 | M√£o | 05:00-07:00 |
| 5 | Th√¨n | 07:00-09:00 |
| 6 | T·ªµ | 09:00-11:00 |
| 7 | Ng·ªç | 11:00-13:00 |
| 8 | M√πi | 13:00-15:00 |
| 9 | Th√¢n | 15:00-17:00 |
| 10 | D·∫≠u | 17:00-19:00 |
| 11 | Tu·∫•t | 19:00-21:00 |
| 12 | H·ª£i | 21:00-23:00 |

**Can gi·ªù:** = (Can Ng√†y + S·ªë gi·ªù - 1) % 10

---

## 6. C√°c Th·∫ø M·ªánh

### 6.1 Th·∫ø M·ªánh ch√≠nh

| Th·∫ø | ƒêi·ªÅu ki·ªán | √ù nghƒ©a |
|-----|-----------|---------|
| **Thi√™n ƒê·ªãa Ngang T√†ng** | Kh√¥ng c√≥ Ch√≠nh Tinh | B√¨nh th∆∞·ªùng |
| **Thi√™n ƒê·ªãa H·ªôi H·ª£p** | C√≥ Thi√™n H·ª£p, ƒê·ªãa H·ª£p | T·ªët |
| **Thi√™n ƒê·ªãa Ph√°** | C√≥ Thi√™n Ph√°, ƒê·ªãa Ph√° | X·∫•u |
| **Thi√™n ƒê·ªãa Xung** | C√≥ Thi√™n Xung, ƒê·ªãa Xung | X·∫•u |

### 6.2 C√°c Th·∫ø M·ªánh ƒë·∫∑c bi·ªát

| Th·∫ø | ƒêi·ªÅu ki·ªán | √ù nghƒ©a |
|-----|-----------|---------|
| **Thi√™n ·∫§n** | Nhi·ªÅu ·∫§n | Th√¥ng minh, h·ªçc gi·ªèi |
| **Thi√™n T√†i** | Nhi·ªÅu T√†i | Gi√†u c√≥ |
| **Thi√™n Quan** | Nhi·ªÅu Quan | C√¥ng danh |
| **Thi√™n Th·∫ßn** | Nhi·ªÅu Th·∫ßn | May m·∫Øn |
| **Hai H·ªèa** | Nhi·ªÅu H·ªèa | N√≥ng n·∫£y |
| **L∆∞·ª°ng Th·ªßy** | Nhi·ªÅu Th·ªßy | Linh ho·∫°t |

### 6.3 C√°ch t√≠nh Th·∫ø M·ªánh

```python
def tinh_the_menh(bat_tu):
    """
    T√≠nh th·∫ø m·ªánh d·ª±a v√†o B√°t T·ª±
    bat_tu: {'nam': 'Gi√°p Th√¨n', 'thang': 'B√≠nh D·∫ßn', 'ngay': 'M·∫≠u T√Ω', 'gio': 'Canh T√Ω'}
    """
    # ƒê·∫øm s·ªë l∆∞·ª£ng t·ª´ng ng≈© h√†nh
    dem = {
        'M·ªôc': 0,
        'H·ªèa': 0,
        'Th·ªï': 0,
        'Kim': 0,
        'Th·ªßy': 0
    }
    
    # ƒê·∫øm Ch√≠nh Tinh
    chinh_tinh = 0
    
    # Logic t√≠nh th·∫ø m·ªánh
    # ...
    
    return the_menh
```

---

## 7. V·∫≠n H·∫°n trong T·ª© Tr·ª•

### 7.1 Tam V·∫≠n

| V·∫≠n | Th·ªùi gian | √ù nghƒ©a |
|-----|-----------|---------|
| **S∆° V·∫≠n** | 0-15 tu·ªïi | Th·ªùi th∆° ·∫•u |
| **Trung V·∫≠n** | 15-60 tu·ªïi | Th·ªùi tr∆∞·ªüng th√†nh |
| **H·∫≠u V·∫≠n** | 60+ tu·ªïi | Tu·ªïi gi√† |

### 7.2 L·ª•c Th√¢n

| Th√¢n | √ù nghƒ©a | T·ªët/X·∫•u |
|------|---------|---------|
| **·∫§n** | Ng∆∞·ªùi che ch·ªü | ‚úÖ T·ªët |
| **T√†i** | Ti·ªÅn b·∫°c | ‚úÖ T·ªët |
| **Quan** | C√¥ng danh | ‚úÖ T·ªët |
| **Th·ª±c** | Th·ªÉ l·ª±c | ‚ö†Ô∏è Trung b√¨nh |
| **T·ª∑** | ƒê·ªìng minh | ‚ö†Ô∏è Trung b√¨nh |
| **H·∫°i** | Ng∆∞·ªùi h·∫°i | ‚ùå X·∫•u |

### 7.3 C√°ch t√≠nh V·∫≠n

```python
def tinh_van_han(nam_sinh, bat_tu):
    """
    T√≠nh v·∫≠n h·∫°n d·ª±a v√†o B√°t T·ª±
    """
    # L·∫•y can chi nƒÉm sinh
    can_nam = bat_tu['nam'].split()[0]
    chi_nam = bat_tu['nam'].split()[1]
    
    # T√≠nh v·∫≠n d·ª±a tr√™n can nƒÉm
    # ...
    
    return van_han
```

---

## 8. Ph√¢n t√≠ch B√°t T·ª±

### 8.1 C√°c b∆∞·ªõc ph√¢n t√≠ch

1. **X√°c ƒë·ªãnh Ng≈© H√†nh ch·ªß ƒë·∫°o**
   - Xem h√†nh n√†o chi·∫øm nhi·ªÅu nh·∫•t
   - Xem h√†nh sinh ra ch·ªß ƒë·∫°o

2. **Xem Quan H·ªá**
   - T∆∞∆°ng sinh/t∆∞∆°ng kh·∫Øc
   - H·ªôi h·ª£p, xung, ph√°

3. **Xem Ch√≠nh Tinh**
   - C√°c sao ch√≠nh trong b√°t t·ª±
   - T√°c ƒë·ªông c·ªßa T·ª© H√≥a

4. **Xem V·∫≠n H·∫°n**
   - C√°c giai ƒëo·∫°n trong ƒë·ªùi
   - NƒÉm t·ªët/x·∫•u

### 8.2 V√≠ d·ª• ph√¢n t√≠ch

**B√°t T·ª±:** Gi√°p Th√¨n - B√≠nh D·∫ßn - ·∫§t M√£o - Canh T√Ω

| C·ªôt | Can | Chi | H√†nh | Yin/Yang |
|-----|-----|-----|------|----------|
| NƒÉm | Gi√°p | Th√¨n | Th·ªï | D∆∞∆°ng |
| Th√°ng | B√≠nh | D·∫ßn | M·ªôc | D∆∞∆°ng |
| Ng√†y | ·∫§t | M√£o | M·ªôc | √Çm |
| Gi·ªù | Canh | T√Ω | Th·ªßy | D∆∞∆°ng |

**Ph√¢n t√≠ch:**
- Ch·ªß ƒë·∫°o: M·ªôc (D·∫ßn, M√£o = 2/4)
- Sinh: M·ªôc sinh H·ªèa (B√≠nh D·∫ßn)
- Kh·∫Øc: M·ªôc kh·∫Øc Th·ªï (Gi√°p Th√¨n)
- V∆∞·ª£ng: M·ªôc v∆∞·ª£ng, Th·ªßy suy

---

## 9. Code Examples

### 9.1 L·∫≠p T·ª© Tr·ª• ho√†n ch·ªânh

```python
from lunardate import LunarDate
from datetime import datetime

CAN = ['Gi√°p', '·∫§t', 'B√≠nh', 'ƒêinh', 'M·∫≠u', 'K·ª∑', 'Canh', 'T√¢n', 'Nh√¢m', 'Qu√Ω']
CHI = ['T√Ω', 'S·ª≠u', 'D·∫ßn', 'M√£o', 'Th√¨n', 'T·ªµ', 'Ng·ªç', 'M√πi', 'Th√¢n', 'D·∫≠u', 'Tu·∫•t', 'H·ª£i']
CHI_GIO = ['T√Ω', 'S·ª≠u', 'D·∫ßn', 'M√£o', 'Th√¨n', 'T·ªµ', 'Ng·ªç', 'M√πi', 'Th√¢n', 'D·∫≠u', 'Tu·∫•t', 'H·ª£i']

def lap_tu_tru(nam, thang, ngay, gio):
    """
    L·∫≠p T·ª© Tr·ª• t·ª´ ng√†y d∆∞∆°ng l·ªãch v√† gi·ªù sinh
    
    Args:
        nam: NƒÉm d∆∞∆°ng l·ªãch
        thang: Th√°ng d∆∞∆°ng l·ªãch
        ngay: Ng√†y d∆∞∆°ng l·ªãch
        gio: Gi·ªù sinh (0-11, 0=T√Ω, 1=S·ª≠u...)
    """
    # 1. NƒÉm
    can_nam = CAN[(nam - 4) % 10]
    chi_nam = CHI[(nam - 4) % 12]
    
    # 2. Th√°ng
    chi_thang = CHI_GIO[(thang + 1) % 12]  # Th√°ng 1 = D·∫ßn
    can_thang = CAN[(CAN.index(can_nam) * 2 + thang) % 10]
    
    # 3. Ng√†y (d√πng lunardate)
    ld = LunarDate.fromSolarDate(nam, thang, ngay)
    chi_ngay = CHI[(ld.day - 1) % 12]
    can_ngay = CAN[(ld.day * 2 - 1) % 10]
    
    # 4. Gi·ªù
    chi_gio = CHI_GIO[gio]
    can_gio = CAN[(CAN.index(can_nam) + CAN.index(can_ngang) + gio) % 10]
    
    return {
        'nam': f"{can_nam} {chi_nam}",
        'thang': f"{can_thang} {chi_thang}",
        'ngay': f"{can_ngay} {chi_ngay}",
        'gio': f"{can_gio} {chi_gio}"
    }
```

### 9.2 T√≠nh Ng≈© H√†nh ch·ªß ƒë·∫°o

```python
HANH = {
    'Gi√°p': 'M·ªôc', '·∫§t': 'M·ªôc',
    'B√≠nh': 'H·ªèa', 'ƒêinh': 'H·ªèa',
    'M·∫≠u': 'Th·ªï', 'K·ª∑': 'Th·ªï',
    'Canh': 'Kim', 'T√¢n': 'Kim',
    'Nh√¢m': 'Th·ªßy', 'Qu√Ω': 'Th·ªßy',
    'T√Ω': 'Th·ªßy', 'S·ª≠u': 'Th·ªï', 'D·∫ßn': 'M·ªôc',
    'M√£o': 'M·ªôc', 'Th√¨n': 'Th·ªï', 'T·ªµ': 'H·ªèa',
    'Ng·ªç': 'H·ªèa', 'M√πi': 'Th·ªï', 'Th√¢n': 'Kim',
    'D·∫≠u': 'Kim', 'Tu·∫•t': 'Th·ªï', 'H·ª£i': 'Th·ªßy',
}

def tinh_ngu_hanh_chu_dao(tu_tru):
    """T√≠nh ng≈© h√†nh ch·ªß ƒë·∫°o"""
    hanh_counts = {'M·ªôc': 0, 'H·ªèa': 0, 'Th·ªï': 0, 'Kim': 0, 'Th·ªßy': 0}
    
    for key in ['nam', 'thang', 'ngay', 'gio']:
        can, chi = tu_tru[key].split()
        hanh_counts[HANH[can]] += 1
        hanh_counts[HANH[chi]] += 1
    
    # T√¨m h√†nh nhi·ªÅu nh·∫•t
    chu_dao = max(hanh_counts, key=hanh_counts.get)
    return chu_dao, hanh_counts
```

### 9.3 Ki·ªÉm tra H·ªôi H·ª£p

```python
def kiem_tra_luc_hop(chi1, chi2):
    """Ki·ªÉm tra l·ª•c h·ª£p"""
    hop = {
        'T√Ω': 'T·ªµ', 'T·ªµ': 'T√Ω',
        'S·ª≠u': 'Th√¨n', 'Th√¨n': 'S·ª≠u',
        'D·∫ßn': 'H·ª£i', 'H·ª£i': 'D·∫ßn',
        'M√£o': 'Ng·ªç', 'Ng·ªç': 'M√£o',
        'Th√¢n': 'D·∫≠u', 'D·∫≠u': 'Th√¢n',
        'Tu·∫•t': 'H·ª£i', 'H·ª£i': 'Tu·∫•t',
    }
    return hop.get(chi1) == chi2

def kiem_tra_luc_xung(chi1, chi2):
    """Ki·ªÉm tra l·ª•c xung"""
    xung = {
        'T√Ω': 'Ng·ªç', 'Ng·ªç': 'T√Ω',
        'S·ª≠u': 'M√πi', 'M√πi': 'S·ª≠u',
        'D·∫ßn': 'Th√¢n', 'Th√¢n': 'D·∫ßn',
        'M√£o': 'D·∫≠u', 'D·∫≠u': 'M√£o',
        'Th√¨n': 'Tu·∫•t', 'Tu·∫•t': 'Th√¨n',
        'T·ªµ': 'H·ª£i', 'H·ª£i': 'T·ªµ',
    }
    return xung.get(chi1) == chi2
```

---

## 10. Ghi ch√∫ cho Developer

1. **Input:** Ng√†y/gi·ªù sinh d∆∞∆°ng l·ªãch
2. **Th∆∞ vi·ªán:** D√πng `lunardate` ƒë·ªÉ chuy·ªÉn ƒë·ªïi √¢m/d∆∞∆°ng
3. **Validation:** Ki·ªÉm tra ng√†y gi·ªù h·ª£p l·ªá
4. **Caching:** L∆∞u b√°t t·ª± ƒë√£ t√≠nh
5. **Timezone:** UTC+7 cho Vi·ªát Nam

---

## 11. Link Tham kh·∫£o

- L·ªãch √Çm Vi·ªát: https://www.informatik.uni-leipzig.de/~duc/amlich/
- Lunar Date Python: https://pypi.org/project/lunardate/
- B√°t T·ª± H·ªçc: https://batutu.vn/
- T·ª© Tr·ª•: https://tutru.vn/

---

**C·∫≠p nh·∫≠t:** 2026-02-06
**Ngu·ªìn:** T·ª© Tr·ª• h·ªçc truy·ªÅn th·ªëng
**T√°c gi·∫£:** T·ª≠ Vi Kit - Di·ªáu Nhi